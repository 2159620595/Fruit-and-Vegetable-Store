# 测试快速启动指南

## 🎯 立即开始测试

### 第一步：启动前端

```bash
# 确保在项目根目录
npm run dev
```

**期望输出：**
```
  VITE v7.0.6  ready in xxx ms

  ➜  Local:   http://localhost:5173/
  ➜  Network: use --host to expose
```

### 第二步：打开浏览器

访问：`http://localhost:5173`

---

## 🧪 新增功能快速测试

### 1. 测试订单搜索（30秒）

**步骤：**
1. 登录系统
2. 进入订单列表页 `/orders`
3. 在右上角搜索框输入 `芒果` 或订单号
4. 按回车或点击搜索按钮

**期望结果：**
- ✅ 显示匹配的订单
- ✅ 显示找到的订单数量提示
- ✅ 支持分页

**截图位置：**
```
┌──────────────────────────────────────────────┐
│  我的订单         [搜索框: 芒果] [🔍] [刷新]  │
└──────────────────────────────────────────────┘
```

---

### 2. 测试订单状态流转（1分钟）

**步骤：**
1. 找到一个"待发货"状态的订单
2. 点击绿色按钮"**流转到下一状态**"
3. 在确认对话框中点击"确定"
4. 观察订单状态变化

**期望结果：**
- ✅ 订单状态变为"已发货"
- ✅ 显示成功提示："订单已更新为：已发货"
- ✅ 订单列表自动刷新

**按钮位置：**
```
订单卡片
├── 订单头部（订单号、日期、状态）
├── 订单商品（商品图片和名称）
└── 订单操作
    ├── [流转到下一状态] ← 绿色按钮（新增）
    ├── [联系商家]
    └── [取消订单]
```

---

### 3. 测试物流信息（30秒）

**步骤：**
1. 找到一个"已发货"或"运输中"的订单
2. 点击"**查看物流**"按钮
3. 查看物流追踪对话框

**期望结果：**
- ✅ 打开物流追踪对话框
- ✅ 显示物流单号和承运商
- ✅ 显示物流轨迹时间线
- ✅ 如果后端API正常，显示真实数据
- ✅ 如果后端API失败，显示模拟数据（会有控制台警告）

---

## 🔍 详细功能测试

### 订单搜索功能测试清单

- [ ] **搜索订单号**
  - 输入完整订单号（如：`ORD1760870718178E39KNDJGB`）
  - 验证能找到对应订单

- [ ] **搜索商品名称**
  - 输入商品名称（如：`芒果`、`草莓`）
  - 验证能找到包含该商品的订单

- [ ] **空关键词提示**
  - 不输入任何内容直接点击搜索
  - 应显示："请输入搜索关键词"

- [ ] **清除搜索**
  - 搜索后点击清除按钮（×）
  - 应恢复显示所有订单

- [ ] **回车键搜索**
  - 输入关键词后按回车
  - 应执行搜索

- [ ] **搜索结果分页**
  - 如果搜索结果超过10条
  - 验证分页器正常工作

---

### 订单状态流转测试清单

#### 正常流转测试

- [ ] **待发货 → 已发货**
  - 找到"待发货"订单
  - 点击"流转到下一状态"
  - 确认后验证状态变为"已发货"

- [ ] **已发货 → 运输中**
  - 找到"已发货"订单
  - 点击"标记为运输中"
  - 确认后验证状态变为"运输中"

- [ ] **运输中 → 已送达**
  - 找到"运输中"订单
  - 点击"标记为已送达"
  - 确认后验证状态变为"已送达"

#### 异常流转测试（需要后端支持）

- [ ] **非法流转：已送达 → 已发货**
  - 找到"已送达"订单
  - 尝试任何状态变更
  - 应显示错误："订单状态不能从"已送达"变更为"XXX""

- [ ] **非法流转：已取消订单**
  - 找到"已取消"订单
  - 验证没有状态流转按钮
  - 或尝试流转时被拒绝

---

### 物流信息测试清单

- [ ] **有物流单号的订单**
  - 点击"查看物流"
  - 应显示物流单号、承运商
  - 应显示物流轨迹时间线

- [ ] **无物流单号的订单**
  - 点击"查看物流"
  - 应显示"暂无物流信息"
  - 或显示模拟物流数据

- [ ] **物流信息刷新**
  - 在物流对话框中点击"刷新"按钮
  - 验证数据更新

- [ ] **复制物流单号**
  - 点击物流单号旁的复制按钮
  - 验证单号已复制到剪贴板

---

## 🐛 问题排查

### 问题1：搜索功能返回空结果

**可能原因：**
- 后端接口未实现
- 搜索关键词不匹配

**排查步骤：**
1. 打开浏览器开发者工具（F12）
2. 切换到"Network"标签
3. 执行搜索
4. 查看 `/api/orders/search` 请求
5. 检查请求状态和响应

**预期响应：**
```json
{
  "code": 200,
  "message": "搜索成功",
  "data": {
    "orders": [...],
    "total": 12
  }
}
```

---

### 问题2：状态流转按钮点击无反应

**可能原因：**
- 后端接口未实现
- 网络请求失败

**排查步骤：**
1. 打开浏览器控制台（F12 → Console）
2. 点击状态流转按钮
3. 查看控制台错误信息
4. 检查 Network 标签中的 `/api/orders/:id/status` 请求

**预期请求：**
```
PUT /api/orders/55/status
Body: { "status": "shipped" }
```

**预期响应：**
```json
{
  "code": 200,
  "message": "订单状态更新成功",
  "data": { ... }
}
```

---

### 问题3：物流信息显示模拟数据

**原因：**
- 这是正常的 fallback 机制
- 后端 `/api/logistics/:orderId` 接口调用失败时自动使用模拟数据

**如何使用真实数据：**
1. 确保后端服务已启动
2. 确保数据库已执行 `database-update.sql`
3. 确保订单有 `tracking_number` 字段数据

**验证方法：**
```sql
-- 在数据库中查询
SELECT id, order_number, tracking_number 
FROM orders 
WHERE id = 55;
```

---

## 📊 浏览器开发者工具使用

### 打开开发者工具

- **Windows/Linux:** F12 或 Ctrl + Shift + I
- **Mac:** Cmd + Option + I

### 常用标签

1. **Console（控制台）**
   - 查看 JavaScript 错误
   - 查看 console.log 输出

2. **Network（网络）**
   - 查看所有网络请求
   - 检查 API 调用状态
   - 查看请求和响应数据

3. **Elements（元素）**
   - 检查 HTML 结构
   - 查看元素样式
   - 调试布局问题

4. **Application（应用）**
   - 查看 LocalStorage
   - 检查 Pinia 持久化数据

---

## 🎯 测试优先级

### 高优先级（必测）
1. ✅ 订单列表正常加载
2. ✅ 订单搜索功能
3. ✅ 订单状态流转
4. ✅ 订单详情查看

### 中优先级（建议测试）
1. ⚡ 物流信息查询
2. ⚡ 订单评价功能
3. ⚡ 订单取消功能
4. ⚡ 确认收货功能

### 低优先级（可选测试）
1. 💡 再次购买
2. 💡 联系商家
3. 💡 删除订单

---

## 📝 测试记录模板

```markdown
## 测试日期：2025-10-20

### 测试环境
- 浏览器：Chrome 120.x
- 操作系统：Windows 11
- 前端端口：http://localhost:5173
- 后端端口：http://localhost:3000

### 测试结果

#### 1. 订单搜索功能
- [ ] 通过 / [ ] 失败
- 问题描述：
- 截图：

#### 2. 订单状态流转
- [ ] 通过 / [ ] 失败
- 问题描述：
- 截图：

#### 3. 物流信息查询
- [ ] 通过 / [ ] 失败
- 问题描述：
- 截图：

### 发现的问题
1. 
2. 
3. 

### 建议改进
1. 
2. 
3. 
```

---

## 🚀 性能测试

### 使用浏览器性能工具

1. 打开开发者工具（F12）
2. 切换到 "Performance" 标签
3. 点击录制按钮（●）
4. 执行要测试的操作
5. 停止录制
6. 查看性能分析

### 关键指标

- **订单列表加载时间：** < 500ms
- **搜索响应时间：** < 300ms
- **状态更新时间：** < 500ms
- **物流信息加载：** < 200ms

---

## 📞 获取帮助

如果遇到问题：

1. **查看文档**
   - `项目测试报告.md` - 完整测试报告
   - `前端更新说明.md` - 功能说明
   - `项目优化完成总结.md` - 优化总结

2. **检查控制台**
   - 浏览器控制台（F12 → Console）
   - 查看错误信息

3. **检查网络请求**
   - 开发者工具 → Network
   - 查看 API 调用状态

4. **查看 LocalStorage**
   - 开发者工具 → Application → LocalStorage
   - 检查 Pinia 持久化数据

---

**祝测试顺利！🎉**

如有任何问题，请参考相关文档或检查浏览器控制台。

