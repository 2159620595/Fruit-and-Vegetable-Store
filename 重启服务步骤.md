# 重启服务以应用修复

## 1. 停止当前后端服务

如果使用 PM2：

```bash
pm2 stop all
# 或指定应用名称
pm2 stop app
```

如果使用 node 直接运行：

```bash
# Windows: Ctrl + C
# 或查找并结束 node 进程
tasklist | findstr node
taskkill /F /PID <进程ID>
```

## 2. 启动后端服务

```bash
# 使用 PM2（推荐）
pm2 start app.js --name "fresh-harvest-api"

# 或直接运行
node app.js
```

## 3. 验证服务启动

```bash
# 查看 PM2 日志
pm2 logs

# 或检查服务是否监听端口
netstat -ano | findstr :3000
```

## 4. 测试前端显示

1. 打开浏览器，访问网站
2. **清除浏览器缓存**（重要！）
   - Chrome: `Ctrl + Shift + Delete`
   - 或强制刷新：`Ctrl + Shift + R`
3. 登录账号
4. 进入"个人中心" → "充值记录"
5. 检查显示效果

## 5. 预期结果

### 充值时间应该显示为：

- ❌ 修复前：`2025-10-21 04:18:45` (UTC时间，晚8小时)
- ✅ 修复后：`2025-10-21 12:18:45` (北京时间，正确)

### 支付方式应该显示为：

- ✅ `wechat` → `微信支付`
- ✅ `alipay` → `支付宝`
- ✅ `bank` → `银行卡`

## 6. 调试检查

打开浏览器控制台（F12），查看日志：

```
📝 充值记录样例数据: ...
💳 支付方式转换: "wechat" -> "微信支付"
```

如果看到这些日志，说明前端代码正常工作。

## 常见问题

### Q: 时间还是不对？

A:

1. 确认后端服务已重启
2. 清除浏览器缓存
3. 检查浏览器控制台是否有错误

### Q: 支付方式还是显示英文？

A:

1. 清除浏览器缓存
2. 强制刷新页面（Ctrl + Shift + R）
3. 查看控制台日志确认映射是否正常

### Q: 如何确认后端已经更新？

A:

1. 查看后端日志
2. 使用 Postman 测试 API：
   ```
   GET http://localhost:3000/api/recharge/records
   ```
3. 检查返回的 created_at 字段格式
